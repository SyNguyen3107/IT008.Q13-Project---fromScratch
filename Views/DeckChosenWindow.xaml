<Window x:Class="EasyFlips.Views.DeckChosenWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="{Binding DeckName}" 
        Height="400" Width="500" 
        ResizeMode="NoResize" 
        WindowStartupLocation="CenterScreen"
        Background="Transparent"
        WindowStyle="None"
        AllowsTransparency="True">

    <Window.Resources>
        <SolidColorBrush x:Key="SurfaceDark" Color="#1F222A"/>
        <SolidColorBrush x:Key="CardBg" Color="#2B2E38"/>
        <SolidColorBrush x:Key="TextGrey" Color="#9E9EA7"/>

        <SolidColorBrush x:Key="StatusBlue" Color="#3498DB"/>
        <SolidColorBrush x:Key="StatusRed" Color="#E74C3C"/>
        <SolidColorBrush x:Key="StatusGreen" Color="#2ECC71"/>
        <SolidColorBrush x:Key="StatusPurple" Color="#6C5DD3"/>

        <LinearGradientBrush x:Key="NeonPurpleGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#8E2DE2" Offset="0"/>
            <GradientStop Color="#4A00E0" Offset="1"/>
        </LinearGradientBrush>

        <Style x:Key="StudyBtnStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource StatusPurple}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bdr" Background="{TemplateBinding Background}" CornerRadius="25">
                            <Border.Effect>
                                <DropShadowEffect Color="#6C5DD3" BlurRadius="20" Opacity="0.5" ShadowDepth="5"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bdr" Property="Opacity" Value="0.9"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.95" ScaleY="0.95"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Border Background="{StaticResource SurfaceDark}" CornerRadius="20" BorderBrush="#333" BorderThickness="1" ClipToBounds="True">
        <Border.Effect>
            <DropShadowEffect Color="Black" BlurRadius="30" Opacity="0.6"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="140"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Border Grid.Row="0" Background="{StaticResource NeonPurpleGradient}">
                <Grid>
                    <TextBlock Text="🎴" FontSize="120" Opacity="0.1" Foreground="White" 
                               HorizontalAlignment="Left" VerticalAlignment="Top" Margin="-23,-20,0,0"/>

                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                        <TextBlock Text="{Binding DeckName}" Foreground="White" FontSize="28" FontWeight="Bold" 
                                   TextAlignment="Center" TextWrapping="Wrap" Margin="20,0"/>

                        <Border Background="#30000000" CornerRadius="10" HorizontalAlignment="Center" Margin="0,10,0,0" Padding="15,5">
                            <TextBlock Foreground="White" FontSize="14" Opacity="0.9">
                                <Run Text="Total Cards: "/>
                                <Run Text="{Binding TotalCards, FallbackValue='0'}" FontWeight="Bold"/>
                            </TextBlock>
                        </Border>
                    </StackPanel>

                    <Button Content="✕" HorizontalAlignment="Right" VerticalAlignment="Top"
                            Background="Transparent" BorderThickness="0" Foreground="White" Opacity="0.7"
                            FontSize="18" Cursor="Hand" Margin="0,10,15,0"
                            Command="{Binding CloseCommand}"
                            CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="Transparent">
                                                <ContentPresenter/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Opacity" Value="1"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </Grid>
            </Border>

            <Grid Grid.Row="1" Margin="25,20,25,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="15"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="15"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Border Grid.Column="0" Background="{StaticResource CardBg}" CornerRadius="15">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                        <TextBlock Text="{Binding NewCount}" Foreground="{StaticResource StatusBlue}" FontSize="28" FontWeight="Bold" HorizontalAlignment="Center"/>
                        <TextBlock Text="New" Foreground="{StaticResource StatusBlue}" FontSize="13" Opacity="0.7" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                    </StackPanel>
                </Border>

                <Border Grid.Column="2" Background="{StaticResource CardBg}" CornerRadius="15">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                        <TextBlock Text="{Binding LearningCount}" Foreground="{StaticResource StatusRed}" FontSize="28" FontWeight="Bold" HorizontalAlignment="Center"/>
                        <TextBlock Text="Learning" Foreground="{StaticResource StatusRed}" FontSize="13" Opacity="0.7" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                    </StackPanel>
                </Border>

                <Border Grid.Column="4" Background="{StaticResource CardBg}" CornerRadius="15">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                        <TextBlock Text="{Binding ReviewCount}" Foreground="{StaticResource StatusGreen}" FontSize="28" FontWeight="Bold" HorizontalAlignment="Center"/>
                        <TextBlock Text="Review" Foreground="{StaticResource StatusGreen}" FontSize="13" Opacity="0.7" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>

            <Button Grid.Row="2" Content="STUDY NOW"
                    Width="220" Height="50" Margin="0,0,0,25"
                    Style="{StaticResource StudyBtnStyle}"
                    Command="{Binding StudyNowCommand}"
                    CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"/>
        </Grid>
    </Border>
</Window>