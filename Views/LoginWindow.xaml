<Window x:Class="EasyFlips.Views.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:views="clr-namespace:EasyFlips.Views"
        xmlns:services="clr-namespace:EasyFlips.Services"
        mc:Ignorable="d"
        Title="Login" Height="518" Width="354"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="{StaticResource Brush.Dark}">

    <Grid Margin="20">
        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Width="280">

            <!-- Picture -->
            <Image Source="pack://application:,,,/Resources/lock.png"
                   Width="100" Height="100"
                   HorizontalAlignment="Center"
                   Margin="0,0,0,20"/>

            <!-- Welcome -->
            <TextBlock Text="Welcome Back!"
                       FontSize="20"
                       Foreground="{StaticResource Brush.TextPrimary}"
                       FontFamily="Poppins"
                       HorizontalAlignment="Center"/>
            <TextBlock Text="Log in to your existing account"
                       FontSize="14"
                       Foreground="{StaticResource Brush.TextSecondary}"
                       FontFamily="Inter V"
                       HorizontalAlignment="Center"
                       Margin="0,5,0,20"/>

            <!-- Email -->
            <TextBox x:Name="txtEmail"
                     ToolTip="Please enter your registered email address (e.g., user@example.com)"
                     Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"
                     services:WatermarkService.Watermark="Enter email"
                     services:WatermarkService.WatermarkSize="14"
                     FontSize="14"
                     Margin="0,5" Height="35"
                     VerticalContentAlignment="Center"
                     Padding="4"
                     Style="{StaticResource {x:Type TextBox}}"/>

            <!-- Password -->
            <Grid Margin="0,5" Height="35">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- TextBox hiển thị mật khẩu -->
                <TextBox x:Name="txtPasswordVisible"
                         ToolTip="Enter your password. Click the eye icon to hide it."
                         Grid.Column="0"
                         FontSize="14"
                         Text="{Binding Password, Mode=TwoWay}"
                         VerticalContentAlignment="Center"
                         Padding="4"
                         Style="{StaticResource {x:Type TextBox}}"
                         Visibility="{Binding IsPasswordVisible, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                <!-- PasswordBox ẩn mật khẩu -->
                <PasswordBox x:Name="txtPasswordHidden"
                             ToolTip="Enter your password. Click the eye icon to see what you've typed."
                             Grid.Column="0"
                             PasswordChanged="PasswordBox_PasswordChanged"
                             services:WatermarkService.Watermark="Enter password"
                             services:WatermarkService.WatermarkSize="14"
                             FontSize="14"
                             PasswordChar="★"
                             VerticalContentAlignment="Center"
                             Padding="4"
                             Style="{StaticResource {x:Type PasswordBox}}"
                             Visibility="{Binding IsPasswordVisible, Converter={StaticResource InvertedBooleanToVisibilityConverter}}"/>

                <!-- Toggle Button -->
                <Button Grid.Column="1"
                        Command="{Binding TogglePasswordVisibilityCommand}"
                        ToolTip="{Binding IsPasswordVisible, 
                          Converter={StaticResource VisibilityToTextConverter}, 
                          ConverterParameter='Hide Password|Show Password'}"
                        IsEnabled="{Binding Password, Converter={StaticResource StringNotEmptyConverter}}"
                        Width="35"
                        Background="Transparent"
                        Foreground="{StaticResource Brush.TextPrimary}">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Content">
                                <Setter.Value>
                                    <Image Source="pack://application:,,,/EasyFlips;component/Resources/hide.png"
                                           Width="20" Height="20"/>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsPasswordVisible}" Value="True">
                                    <Setter Property="Content">
                                        <Setter.Value>
                                            <Image Source="pack://application:,,,/EasyFlips;component/Resources/view.png"
                                                   Width="20" Height="20"/>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </Grid>

            <!-- Remember Me + Forgot Password -->
            <Grid Margin="0,5,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- Remember Me -->
                <CheckBox Content="Remember me"
              IsChecked="{Binding IsRememberMe}"
              ToolTip="Keep me in your heart so I’ll remember you next time!"
              Style="{StaticResource HeartCheckBoxStyle}"
              FontSize="12"
              Foreground="White"
              VerticalAlignment="Center"
              Grid.Column="0"/>

                <!-- Forgot Password -->
                <TextBlock Grid.Column="1" VerticalAlignment="Center" Margin="20,0,0,0">
        <Hyperlink Foreground="{StaticResource Brush.Accent1}" FontSize="12"
                   Command="{Binding ForgotPasswordCommand}"
            ToolTip="Click here to reset your password via email">
            Forgot password
        </Hyperlink>
                </TextBlock>
            </Grid>


            <!-- Error Message -->
            <TextBlock Text="{Binding ErrorMessage}"
                       Foreground="{StaticResource Brush.Accent1}"
                       FontSize="12"
                       Margin="0,5,0,0"
                       TextWrapping="Wrap"/>

           <!-- Login Button -->
            <Button x:Name="btnLogin"
                    ToolTip="Securely log in to your account"
        Command="{Binding LoginCommand}"
        Content="Login"
        FontSize="16"
        Margin="60,10,60,5"
        Height="35"
        FontWeight="Bold"
        Style="{StaticResource AccentButtonStyle}"/>


            <!-- Register Button -->
            <Button x:Name="btnRegister"
                    ToolTip="Don't have an account? Create one now!"
        Command="{Binding OpenRegisterCommand}"
        Content="Register"
        FontSize="15"
        Margin="60,5,60,15"
        Height="35"
        Style="{StaticResource AccentButtonStyle}"
        Background="{StaticResource Brush.Secondary}"/>
        </StackPanel>
    </Grid>
</Window>
