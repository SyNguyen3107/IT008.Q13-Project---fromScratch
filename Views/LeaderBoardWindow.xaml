<Window x:Class="EasyFlips.Views.LeaderBoardWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:EasyFlips.ViewModels"
        mc:Ignorable="d"
        Title="Easy Flips Leaderboard" Height="720" Width="1080"
        WindowStartupLocation="CenterScreen"
        Foreground="White">


    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>

        <LinearGradientBrush x:Key="MainBackground" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#141E30" Offset="0.0"/>
            <GradientStop Color="#243B55" Offset="1.0"/>
        </LinearGradientBrush>

        <Style x:Key="AvatarStyle" TargetType="Ellipse">
            <Setter Property="Stroke" Value="#30FFFFFF"/>
            <Setter Property="StrokeThickness" Value="2"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Black" BlurRadius="10" ShadowDepth="2" Opacity="0.3"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="PodiumCardStyle" TargetType="Border">
            <Setter Property="Background" Value="#20FFFFFF"/>
            <Setter Property="CornerRadius" Value="15"/>
            <Setter Property="BorderBrush" Value="#40FFFFFF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="15"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Black" BlurRadius="20" ShadowDepth="5" Opacity="0.2"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ListItemStyle" TargetType="Border">
            <Setter Property="Background" Value="#10FFFFFF"/>
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
            <Setter Property="Padding" Value="15,10"/>
            <Setter Property="Height" Value="70"/>
        </Style>

        <Style x:Key="QuitButtonStyle" TargetType="Button">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bdr" CornerRadius="8" Padding="20,10">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="#EB3349" Offset="0"/>
                                    <GradientStop Color="#F45C43" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bdr" Property="Opacity" Value="0.9"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SaveButtonStyle" TargetType="Button">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bdr" CornerRadius="8" Padding="20,10">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="#11998e" Offset="0"/>
                                    <GradientStop Color="#38ef7d" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bdr" Property="Opacity" Value="0.9"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Background="{StaticResource MainBackground}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Margin="30,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0" Command="{Binding SaveImageCommand}"
                    Style="{StaticResource SaveButtonStyle}">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <Viewbox Width="16" Height="16" Margin="0,0,10,0">
                        <Path Fill="White" Stretch="Uniform"
                              Data="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z" />
                    </Viewbox>
                    <TextBlock Text="SAVE IMAGE" FontWeight="Bold" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>

            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                <TextBlock Text="LEADERBOARD" HorizontalAlignment="Center"
                           FontSize="28" FontWeight="Black" Foreground="White">
                    <TextBlock.Effect>
                        <DropShadowEffect Color="#F59E0B" BlurRadius="20" Opacity="0.6"/>
                    </TextBlock.Effect>
                </TextBlock>
                <TextBlock Text="Final Results" HorizontalAlignment="Center" FontSize="14" Foreground="#BDC3C7"/>
            </StackPanel>

            <Button Grid.Column="2" Command="{Binding ExitCommand}" 
                    Style="{StaticResource QuitButtonStyle}">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <Viewbox Width="18" Height="18" Margin="0,0,10,0">
                        <Path Fill="White" Stretch="Uniform"
                              Data="M19,3H5C3.89,3 3,3.89 3,5V9H5V5H19V19H5V15H3V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M10.08,15.58L11.5,17L16.5,12L11.5,7L10.08,8.41L12.67,11H3V13H12.67L10.08,15.58Z" />
                    </Viewbox>
                    <TextBlock Text="EXIT ROOM" FontWeight="Bold" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
        </Grid>

        <Grid Grid.Row="1" Margin="20,10,20,30" VerticalAlignment="Bottom">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*"/>
                <ColumnDefinition Width="1.2*"/>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" Style="{StaticResource PodiumCardStyle}" 
                    Margin="10,50,10,0" VerticalAlignment="Bottom"
                    DataContext="{Binding SecondPlace}">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <Viewbox Width="35" Height="35" Margin="0,0,0,5" HorizontalAlignment="Center">
                        <Path Fill="#C0C0C0" Stretch="Uniform"
                              Data="M12,2L15,8L21,9L17,14L18,20L12,17L6,20L7,14L3,9L9,8L12,2Z" />
                    </Viewbox>
                    <Ellipse Width="70" Height="70" Style="{StaticResource AvatarStyle}">
                        <Ellipse.Stroke>
                            <SolidColorBrush Color="#C0C0C0"/>
                        </Ellipse.Stroke>
                        <Ellipse.Fill>
                            <ImageBrush ImageSource="{Binding AvatarUrl, TargetNullValue='/EasyFlips;component/Image/default.png'}" Stretch="UniformToFill"/>
                        </Ellipse.Fill>
                    </Ellipse>
                    <TextBlock Text="{Binding UserName}" d:Text="TOP 2" FontWeight="Bold" FontSize="16" Margin="0,10,0,5" HorizontalAlignment="Center" TextTrimming="CharacterEllipsis"/>
                    <TextBlock Text="{Binding Score, StringFormat='{}{0} PT'}" d:Text="80" FontWeight="Bold" FontSize="20" Foreground="#C0C0C0" HorizontalAlignment="Center" Margin="0,0,0,5"/>
                    <Border Background="#20FFFFFF" CornerRadius="10" Padding="10,2" HorizontalAlignment="Center">
                        <TextBlock Text="{Binding RatioDisplay}" d:Text="8/10" FontSize="12" Foreground="#BDC3C7"/>
                    </Border>
                </StackPanel>
            </Border>

            <Border Grid.Column="1" Style="{StaticResource PodiumCardStyle}" 
                    Margin="10,0,10,0" VerticalAlignment="Bottom"
                    BorderBrush="#FFD700" BorderThickness="2"
                    DataContext="{Binding FirstPlace}">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="#30FFD700" Offset="0"/>
                        <GradientStop Color="#10FFFFFF" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <Viewbox Width="40" Height="40" Margin="0,0,0,5" HorizontalAlignment="Center">
                        <Path Fill="#FFD700" Stretch="Uniform"
                              Data="M5,16L3,5L8.5,10L12,4L15.5,10L21,5L19,16H5M19,19C19,19.6 18.6,20 18,20H6C5.4,20 5,19.6 5,19V18H19V19Z" />
                    </Viewbox>
                    <Ellipse Width="90" Height="90" Style="{StaticResource AvatarStyle}">
                        <Ellipse.Stroke>
                            <SolidColorBrush Color="#FFD700"/>
                        </Ellipse.Stroke>
                        <Ellipse.Fill>
                            <ImageBrush ImageSource="{Binding AvatarUrl, TargetNullValue='/EasyFlips;component/Image/default.png'}" Stretch="UniformToFill"/>
                        </Ellipse.Fill>
                    </Ellipse>
                    <TextBlock Text="{Binding UserName}" d:Text="WINNER" FontWeight="Bold" FontSize="20" Margin="0,10,0,5" HorizontalAlignment="Center" TextTrimming="CharacterEllipsis"/>
                    <TextBlock Text="{Binding Score, StringFormat='{}{0} PT'}" d:Text="100" FontWeight="ExtraBold" FontSize="26" Foreground="#FFD700" HorizontalAlignment="Center" Margin="0,0,0,5"/>
                    <Border Background="#30FFD700" CornerRadius="10" Padding="15,4" HorizontalAlignment="Center">
                        <TextBlock Text="{Binding RatioDisplay}" d:Text="10/10" FontWeight="Bold" FontSize="14" Foreground="#FFD700"/>
                    </Border>
                </StackPanel>
            </Border>

            <Border Grid.Column="2" Style="{StaticResource PodiumCardStyle}" 
                    Margin="10,50,10,0" VerticalAlignment="Bottom"
                    DataContext="{Binding ThirdPlace}">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <Viewbox Width="38" Height="38" Margin="0,0,0,5" HorizontalAlignment="Center">
                        <Path Fill="#CD7F32" Stretch="Uniform"
                              Data="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z" />
                    </Viewbox>
                    <Ellipse Width="70" Height="70" Style="{StaticResource AvatarStyle}">
                        <Ellipse.Stroke>
                            <SolidColorBrush Color="#CD7F32"/>
                        </Ellipse.Stroke>
                        <Ellipse.Fill>
                            <ImageBrush ImageSource="{Binding AvatarUrl, TargetNullValue='/EasyFlips;component/Image/default.png'}" Stretch="UniformToFill"/>
                        </Ellipse.Fill>
                    </Ellipse>
                    <TextBlock Text="{Binding UserName}" d:Text="TOP 3" FontWeight="Bold" FontSize="16" Margin="0,10,0,5" HorizontalAlignment="Center" TextTrimming="CharacterEllipsis"/>
                    <TextBlock Text="{Binding Score, StringFormat='{}{0} PT'}" d:Text="50" FontWeight="Bold" FontSize="20" Foreground="#CD7F32" HorizontalAlignment="Center" Margin="0,0,0,5"/>
                    <Border Background="#20FFFFFF" CornerRadius="10" Padding="10,2" HorizontalAlignment="Center">
                        <TextBlock Text="{Binding RatioDisplay}" d:Text="5/10" FontSize="12" Foreground="#BDC3C7"/>
                    </Border>
                </StackPanel>
            </Border>
        </Grid>

        <Border Grid.Row="2" Background="#10000000" BorderBrush="#20FFFFFF" BorderThickness="0,1,0,0">
            <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="100,10">
                <ItemsControl ItemsSource="{Binding RestPlayers}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Style="{StaticResource ListItemStyle}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="50"/>
                                        <ColumnDefinition Width="70"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="150"/>
                                        <ColumnDefinition Width="100"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Text="{Binding Rank, StringFormat='#{0}'}"
                                               VerticalAlignment="Center" FontWeight="Bold" Foreground="#7F8FA6" FontSize="16"/>

                                    <Ellipse Grid.Column="1" Width="45" Height="45" HorizontalAlignment="Left">
                                        <Ellipse.Fill>
                                            <ImageBrush ImageSource="{Binding AvatarUrl, TargetNullValue='/EasyFlips;component/Image/default.png'}" Stretch="UniformToFill"/>
                                        </Ellipse.Fill>
                                    </Ellipse>

                                    <TextBlock Grid.Column="2" Text="{Binding UserName}" 
                                               VerticalAlignment="Center" FontWeight="SemiBold" FontSize="16"/>

                                    <StackPanel Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center">
                                        <TextBlock Text="Correct: " Foreground="#7F8FA6" FontSize="12" VerticalAlignment="Center"/>
                                        <TextBlock Text="{Binding RatioDisplay}" FontWeight="Bold" Foreground="#4CD137" FontSize="14" VerticalAlignment="Center"/>
                                    </StackPanel>

                                    <Border Grid.Column="4" Background="#20FFFFFF" CornerRadius="8" Padding="0,5">
                                        <TextBlock Text="{Binding Score}" FontWeight="Bold" Foreground="#FF9800" 
                                                   HorizontalAlignment="Center" FontSize="16"/>
                                    </Border>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Border>
    </Grid>
</Window>